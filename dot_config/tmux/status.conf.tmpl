{{- /* Get host-specific theme or fall back to default */ -}}
{{- $hostLabel := .hostLabel | default "unknown" -}}
{{- $host := index .hosts $hostLabel | default .default -}}

# ~/.config/tmux/status.conf
# ============================================================================
# STATUS BAR LAYOUT
# Host: {{ $host.label }} | Theme: {{ $host.theme }}
# ============================================================================

set -g status-position top
set -g status-left-length 80
set -g status-right-length 150

# Status left: Host label prominently displayed
set -g status-left '#[fg={{ $host.bg }},bg={{ $host.primary }},bold] {{ $host.label | upper }} #[fg={{ $host.primary }},bg={{ $host.muted }}]#[fg={{ $host.fg }},bg={{ $host.muted }}] #S #[fg={{ $host.muted }},bg=default] '

# Status right: Continuum indicator, IP, user@host, time
{{ if eq $host.os "macos" -}}
set -g status-right '#[fg={{ $host.muted }}]#[fg={{ $host.accent }},bg={{ $host.muted }}]#{?@continuum_save, AUTO ,}#[fg={{ $host.bg_dark }},bg={{ $host.muted }}]#[fg={{ $host.secondary }},bg={{ $host.bg_dark }}] #(ipconfig getifaddr en0 || echo "no ip") #[fg={{ $host.bg }},bg={{ $host.bg_dark }}]#[fg={{ $host.warning }},bg={{ $host.bg }}] #{user}@#h #[fg={{ $host.muted }},bg={{ $host.bg }}]#[fg={{ $host.fg }},bg={{ $host.muted }}] %H:%M %Y-%m-%d '
{{ else -}}
set -g status-right '#[fg={{ $host.muted }}]#[fg={{ $host.accent }},bg={{ $host.muted }}]#{?@continuum_save, AUTO ,}#[fg={{ $host.bg_dark }},bg={{ $host.muted }}]#[fg={{ $host.secondary }},bg={{ $host.bg_dark }}] #(hostname -I | cut -d" " -f1) #[fg={{ $host.bg }},bg={{ $host.bg_dark }}]#[fg={{ $host.warning }},bg={{ $host.bg }}] #{user}@#h #[fg={{ $host.muted }},bg={{ $host.bg }}]#[fg={{ $host.fg }},bg={{ $host.muted }}] %H:%M %Y-%m-%d '
{{ end -}}

# Window status separator
setw -g window-status-separator '  '

# Show pane numbers longer
set -g display-panes-time 2000
